/*! jQuery userTimeout - v0.3.0 - 2016-05-13
* https://github.com/lleblanc42/jquery-userTimeout
* Copyright (c) 2016 Luke LeBlanc; Licensed GPL-3.0 */
(function(n,t,i){"use strict";n.fn.userTimeout=function(r){var u=n.extend({logouturl:null,referer:!1,refererName:"refer",notify:!0,timer:!0,session:6e5,force:3e5,ui:"auto",debug:!1,modalTitle:"Session Timeout",modalBody:"You're being timed out due to inactivity. Please choose to stay signed in or to logoff. Otherwise, you will logged off automatically."},r||{}),o,e,c,s,l=Math.floor(u.force/1e3%60),v=function(){if(clearTimeout(e),!u.logouturl){u.debug===!0?i.alert("Please configure the userTimeout plugin!"):i.console.error("Please configure the userTimeout plugin!");return}if(o=y(u.ui),o!==!1){f(!1);n(t).on("focus click mousemove mousedown keyup scroll keypress",function(){f(!1)})}},y=function(t){switch(t){case"auto":if(typeof n().emulateTransitionEnd=="function")t="bootstrap";else if(typeof jQuery.ui!="undefined")t="jqueryui";else return u.debug===!0?i.alert("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):i.console.error("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;break;case"bootstrap":if(typeof n().emulateTransitionEnd!="function")return u.debug===!0?i.alert("Twitter Bootstrap 3 was not found! Please load the proper libraries and their themes to utilize this plugin!"):i.console.error("Twitter Bootstrap 3 was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;t="bootstrap";break;case"jqueryui":if(typeof jQuery.ui=="undefined")return u.debug===!0?i.alert("jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):i.console.error("jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;t="jqueryui";break;default:return u.debug===!0?i.alert("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):i.console.error("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1}return t},p=function(){var i,s,c,y,p,r,v,w,e,b;if(f(!0),o==="bootstrap"){i=n('<div class="modal fade" id="notifyLogout" tabindex="-1" role="dialog" aria-labelledby="notifyLogoutLabel" aria-hidden="true"><\/div>');s=n('<div class="modal-dialog"><\/div>');c=n('<div class="modal-content"><\/div>');y=n('<div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;<\/span><span class="sr-only">Close<\/span><\/button><h4 class="modal-title" id="notifyLogoutLabel">'+u.modalTitle+"<\/h4><\/div>");p=n('<div class="modal-body">'+u.modalBody+"<\/div>");u.timer===!0?(r=n('<div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Stay Logged In (<span id="countdowntimer">'+l+"<\/span>)<\/button><\/div>"),a(l)):r=n('<div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">Stay Logged In<\/button><\/div>');v=n('<button type="button" class="btn btn-danger" id="logoff">Log Off<\/button>');c.append(y,p,r);r.prepend(v);s.append(c);i.append(s);n(i).modal({backdrop:"static",keyboard:!1,show:!0});n(i).on("hide.bs.modal",function(){f(!1);n(t).on("focus click mousemove mousedown keyup scroll keypress",function(){f(!1)});n(i).remove()});n(v).on("click",function(){h()})}else o==="jqueryui"&&(e={},b='<div id="notifyLogout"><p>'+u.modalBody+"<\/p><\/div>",e["Stay Logged In"]=function(){f(!1);n(t).on("focus click mousemove mousedown keyup scroll keypress",function(){f(!1)});w.dialog("close")},e["Log Off"]=function(){h()},w=n(b).dialog({buttons:e,modal:!0,width:600,height:300,resizable:!1,title:u.modalTitle}))},a=function(t){n("#countdowntimer").html(t);t!==0?s=setTimeout(function(){t=t-1;a(t)},1e3):clearTimeout(s)},f=function(n){clearTimeout(e);clearTimeout(c);clearTimeout(s);n===!0?c=setTimeout(h,u.force):e=u.notify===!0?setTimeout(p,u.session):setTimeout(h,u.session)},h=function(){var t,r;return clearTimeout(e),clearTimeout(c),clearTimeout(s),u.referer!==!1?u.referer==="auto"?(r=n(location).attr("href"),t=u.logouturl+"?"+encodeURIComponent(u.refererName)+"="+encodeURIComponent(r)):t=u.logouturl+"?"+encodeURIComponent(u.refererName)+"="+encodeURIComponent(u.referer):t=u.logouturl,i.location=t};return this.each(function(){v()})}})(jQuery,document,window);
//# sourceMappingURL=jquery.userTimeout.min.js.map
